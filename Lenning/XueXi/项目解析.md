# 项目解析

## 项目文件分析

在这个项目运行中涉及到的文件为：

```
./
package.json  // 生产、安装环境使用的包
app.js  // 主文件


bin  // 运行目录
bin/www // 运行文件

db  // 数据库链接文件
db/bookstore.sql  // 数据库备份文件
db/db.js  // 创建并控制数据库运行接口
db/db_config.js  // 数据库配置信息

public  // 服务器资源

routes  // 路由文件
routes/index.js  // 挂载后端服务访问接口
routes/users.js  // 服务运行接口持续监听

screenshot  // md文件使用到的图片

service  // 路由函数处理模块
service/bookService.js  // 路由上挂载的处理函数(crud)
service/userService.js  // 用户登录&登出处理函数

views  // 前端模板
```



## 项目运行状态分析

项目环境：Ejs + Nodejs + Mysql

Mysql数据库结构：bookstart（数据库）=》book（数据表）
																=》user（用户表）

mysql> desc book;
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| book_id   | int(11)      | NO   | PRI | NULL    | auto_increment |
| book_name | varchar(50)  | YES  |     | NULL    |                |
| author    | varchar(20)  | YES  |     | NULL    |                |
| publish   | varchar(50)  | YES  |     | NULL    |                |
| category  | varchar(20)  | YES  |     | NULL    |                |
| book_desc | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+

mysql> desc user;
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| user_id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| username    | varchar(20) | NO   |     | NULL    |                |
| password    | varchar(16) | YES  |     | NULL    |                |
| phone       | varchar(11) | YES  |     | NULL    |                |
| user_status | varchar(1)  | YES  |     | NULL    |                |
+-------------+-------------+------+-----+---------+----------------+

项目运行流程：

1. 项目启动：通过npm start 命令启动./bin/www文件，在http:127.0.0.1:3000端口监听服务
2. 用户登录：访问第一步是用户登录（即主页），经过验证后访问到主页
3. 等待页面：用户登录成功后用户可以选择两个路线：
   1. 登出操作；
   2. 查看图书管理系统首页；
4. 图书首页：用户可通过/main路径访问到图书管理系统首页，通过筛选条件找到自己想要的图书
5. 添加/修改/删除书籍：用户可以自行添加书籍或修改、删除自己添加的书籍



## 项目角色分析

项目从上至下由五步浏览过程；

1. 项目启动：Ejs + Nodejs + Mysql 都在这一步初始化，等待用户访问接口

2. 用户登录：Mysql会将存储的用户信息（user表）与用户输入信息进行对比，满足条件才可进入

   ​	登陆时使用Ejs登录=》Nodejs查询Mysql中user表的账号和 ***解密后*** 的密码=》将两者进行对比

   ​		成功：跳转图书管理首页

   ​		失败：重新输入账号密码

3. 图书首页：Mysql的用户信息表（user）和书籍信息表（book）查找和渲染

   ​	

4. 添加/修改/删除书籍：

