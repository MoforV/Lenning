{"remainingRequest":"G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\babel-loader\\lib\\index.js!G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\lanxin\\Lenning\\Lenning\\Old\\test\\src\\page\\set-up\\modify-infor.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\lanxin\\Lenning\\Lenning\\Old\\test\\src\\page\\set-up\\modify-infor.vue","mtime":1710846626000},{"path":"G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1730623019534},{"path":"G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":1730623020067},{"path":"G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1730623019534},{"path":"G:\\lanxin\\Lenning\\Lenning\\Old\\test\\node_modules\\vue-loader\\lib\\index.js","mtime":1730623017096}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"G:/lanxin/Lenning/Lenning/Old/test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _console = console,\n    log = _console.log;\nexport default {\n  data: function data() {\n    return {\n      whether: false,\n      setup: '设置店铺信息',\n      butn: '提交',\n      load: false,\n      action: this.Urls.m().uploadres,\n      // 上传logoing\n      loadmen: false,\n      // 上个页面传来的id\n      id: '',\n      name: '',\n      address: '',\n      logo: [],\n      dialogImageUrl: '',\n      dialogVisible: false\n    };\n  },\n  methods: {\n    // 展开大图\n    handlepreview: function handlepreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    // 上传失败\n    onErr: function onErr(e) {\n      this.loadmen = false;\n      this.$message.error('上传失败,尝试重新上传');\n    },\n    // 上传时\n    project: function project(file) {\n      this.loadmen = true;\n    },\n    // logo移除文件时的钩子\n    logoRemove: function logoRemove(file, fileList) {\n      this.logo = [];\n    },\n    // 上传成功：logo\n    logoSuccess: function logoSuccess(res, file, fileList) {\n      console.log(res);\n      console.log(file);\n      this.logo.push({\n        url: res.data,\n        uid: file.uid\n      }); //element展示图片时需要数组类型的才能展示\n\n      this.loadmen = false;\n    },\n    // 返回上一页\n    reTurn: function reTurn() {\n      this.$router.push({\n        name: 'set-up'\n      });\n    },\n    // 提交或修改\n    bTns: function bTns(is) {\n      this.load = true;\n      var obj = {\n        id: this.id,\n        name: this.name,\n        address: this.address,\n        logo: JSON.stringify(this.logo)\n      };\n\n      if (is == '提交') {\n        console.log('提交');\n        this.purequest(obj, is, this.Urls.m().uploadshop);\n      } else {\n        console.log('修改'); // 提交修改\n\n        this.purequest(obj, is, this.Urls.m().modifyshop);\n      }\n    },\n    // 提交或修改公用请求\n    purequest: function () {\n      var _purequest = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(obj, is, url) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return new this.Request(url, this.$qs.stringify(obj)).modepost();\n\n              case 3:\n                res = _context.sent;\n\n                if (res.status != 200) {\n                  new this.mytitle(this.$message, 'warning', res.data.msg).funtitle();\n                } else {\n                  new this.mytitle(this.$message, 'success', res.data.msg).funtitle();\n                  localStorage.setItem(\"company\", this.name);\n\n                  if (is == '提交') {\n                    this.$router.push({\n                      name: 'index'\n                    });\n                  } else {\n                    this.$router.push({\n                      name: 'set-up'\n                    });\n                  }\n                }\n\n                this.load = false;\n                _context.next = 12;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                this.load = false;\n                new this.mytitle(this.$message, 'error', '服务器发生错误,请重试').funtitle();\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 8]]);\n      }));\n\n      function purequest(_x, _x2, _x3) {\n        return _purequest.apply(this, arguments);\n      }\n\n      return purequest;\n    }()\n  },\n  created: function created() {\n    var res = this.$route.params.data;\n    console.log(res);\n\n    if (res == undefined) {\n      this.whether = false;\n      this.setup = '设置店铺信息';\n      this.butn = '提交';\n    } else {\n      this.whether = true;\n      this.setup = '修改店铺信息';\n      this.butn = '提交修改';\n      this.id = res._id, this.name = res.name, this.address = res.address, this.logo = res.logo;\n    }\n  }\n};",{"version":3,"sources":["modify-infor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div class=\"max-wid\" v-loading.fullscreen.lock=\"loadmen\">\n\t<div class=\"heading\">\n\t\t<p @click=\"reTurn()\" v-if=\"whether\">返回上一页</p>\n\t\t<p class=\"heading-users\">{{setup}}</p>\n\t</div>\n\t<!-- 店铺名称 -->\n\t<div class=\"image-view-title\">\n\t\t<div class=\"image-list\">店铺名称</div>\n\t\t<el-input v-model=\"name\" placeholder=\"请输入店铺名称\"></el-input>\n\t</div>\n\t<!-- 店铺地址 -->\n\t<div class=\"image-view-title\">\n\t\t<div class=\"image-list\">店铺地址</div>\n\t\t<el-input v-model=\"address\" type=\"text\" placeholder=\"请输入店铺地址\"></el-input>\n\t</div>\n\t<!-- 店铺logo -->\n\t<div class=\"image-view-title\">\n\t\t<div class=\"image-list\">店铺logo</div>\n\t\t<div>\n\t\t\t<el-upload\n\t\t\t  :action=\"action\"\n\t\t\t  list-type=\"picture-card\"\n\t\t\t  name=\"file\"\n\t\t\t  accept=\".jpg,.png,.webp,.jfif\"\n\t\t\t  :limit=\"1\"\n\t\t\t  :on-remove=\"logoRemove\"\n\t\t\t  :on-success=\"logoSuccess\"\n\t\t\t  :on-preview=\"handlepreview\"\n\t\t\t  :multiple=\"false\"\n\t\t\t  :on-error=\"onErr\"\n\t\t\t  :before-upload=\"project\"\n\t\t\t  :file-list=\"logo\"\n\t\t\t  >\n\t\t\t  <i class=\"el-icon-plus\"></i>\n\t\t\t</el-upload>\n\t\t\t<!-- 大图展开 -->\n\t\t\t<el-dialog :visible.sync=\"dialogVisible\">\n\t\t\t  <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n\t\t\t</el-dialog>\n\t\t</div>\n\t</div>\n\t\n\t<!-- 提交 -->\n\t<div class=\"image-button\">\n\t\t<el-button type=\"success\" size=\"medium\" @click=\"bTns(butn)\" :loading=\"load\" :disabled=\"load\">{{butn}}</el-button>\n\t</div>\n</div>\n</template>\n\n<script>\nvar {log} = console\nexport default{\n\tdata() {\n\t\treturn {\n\t\t\twhether:false,\n\t\t\tsetup:'设置店铺信息',\n\t\t\tbutn:'提交',\n\t\t\tload:false,\n\t\t\taction:this.Urls.m().uploadres,\n\t\t\t// 上传logoing\n\t\t\tloadmen:false,\n\t\t\t// 上个页面传来的id\n\t\t\tid:'',\n\t\t\tname: '',\n\t\t\taddress:'',\n\t\t\tlogo:[],\n\t\t\tdialogImageUrl: '',\n\t\t\tdialogVisible: false,\n\t\t}\n\t},\n\tmethods:{\n\t\t// 展开大图\n\t\thandlepreview(file) {\n\t\t  this.dialogImageUrl = file.url;\n\t\t  this.dialogVisible = true;\n\t\t},\n\t\t// 上传失败\n\t\tonErr(e){\n\t\t\tthis.loadmen = false\n\t\t\tthis.$message.error('上传失败,尝试重新上传');\n\t\t},\n\t\t// 上传时\n\t\tproject(file){\n\t\t\tthis.loadmen = true\n\t\t},\n\t\t// logo移除文件时的钩子\n\t\tlogoRemove(file, fileList) {\n\t\t  this.logo = []\n\t\t},\n\t\t// 上传成功：logo\n\t\tlogoSuccess(res, file, fileList){\n\t\t\tconsole.log(res)\n\t\t\tconsole.log(file)\n\t\t\tthis.logo.push({url:res.data,uid:file.uid})//element展示图片时需要数组类型的才能展示\n\t\t\tthis.loadmen = false\n\t\t},\n\t\t// 返回上一页\n\t\treTurn(){\n\t\t\tthis.$router.push({name:'set-up'});\n\t\t},\n\t\t// 提交或修改\n\t\tbTns(is){\n\t\t\tthis.load = true\n\t\t\tconst obj = {id:this.id,name:this.name,address:this.address,logo:JSON.stringify(this.logo)}\n\t\t\tif(is == '提交'){\n\t\t\t\tconsole.log('提交')\n\t\t\t\tthis.purequest(obj,is,this.Urls.m().uploadshop)\n\t\t\t}else{\n\t\t\t\tconsole.log('修改')\n\t\t\t\t// 提交修改\n\t\t\t\tthis.purequest(obj,is,this.Urls.m().modifyshop)\n\t\t\t}\n\t\t},\n\t\t// 提交或修改公用请求\n\t\tasync purequest(obj,is,url){\n\t\t\ttry{\n\t\t\t\tconst res = await new this.Request(url,this.$qs.stringify(obj)).modepost()\n\t\t\t\tif(res.status != 200){\n\t\t\t\t\tnew this.mytitle(this.$message,'warning',res.data.msg).funtitle()\n\t\t\t\t}else{\n\t\t\t\t\tnew this.mytitle(this.$message,'success',res.data.msg).funtitle()\n\t\t\t\t\tlocalStorage.setItem(\"company\", this.name)\n\t\t\t\t\tif(is == '提交'){\n\t\t\t\t\t\tthis.$router.push({name:'index'})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$router.push({name:'set-up'})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.load = false\n\t\t\t}catch(e){\n\t\t\t\tthis.load = false\n\t\t\t\tnew this.mytitle(this.$message,'error','服务器发生错误,请重试').funtitle()\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tlet res = this.$route.params.data\n\t\tconsole.log(res)\n\t\tif(res == undefined){\n\t\t\tthis.whether = false\n\t\t\tthis.setup = '设置店铺信息'\n\t\t\tthis.butn = '提交'\n\t\t}else{\n\t\t\tthis.whether = true\n\t\t\tthis.setup = '修改店铺信息'\n\t\t\tthis.butn = '提交修改'\n\t\t\tthis.id = res._id,\n\t\t\tthis.name = res.name,\n\t\t\tthis.address = res.address,\n\t\t\tthis.logo = res.logo\n\t\t}\n\t}\n}\n</script>\n\n<style scoped=\"scoped\">\n.max-wid{\nmax-width: 800px;\nmargin: 0 auto;\nbackground-color: #FFFFFF;\npadding: 0 40px;\n}\n.heading{font-size: 20px;\nfont-weight: bold;\ntext-align: center;\npadding-top: 50px;\ndisplay: flex;\n}\n.heading-users{flex: 1;}\n.heading p:nth-child(1){cursor:pointer;}\n.image-view-title{max-width: 800px;\nmargin-bottom: 30px;\nmargin-top: 30px;\n}\n.image-view-title img{object-fit: cover;}\n.image-list{margin-bottom: 20px;}\n.el-textarea>>>.el-textarea__inner{\nborder: 0 !important;\n}\n.el-button--success{width: 150px;}\n.image-button{max-width: 800px;\ntext-align: center;\npadding: 120px 0;\n}\n</style>\n"],"sourceRoot":"src/page/set-up"}]}